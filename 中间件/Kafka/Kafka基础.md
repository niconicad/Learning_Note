### **Apache Kafka çŸ¥è¯†å¤§å…¨ï¼ˆä»å…¥é—¨åˆ°ç²¾é€šï¼‰**

Apache Kafka æ˜¯ä¸€ä¸ª **åˆ†å¸ƒå¼æµå¤„ç†å¹³å°**ï¼Œæœ€åˆç”± LinkedIn å¼€å‘ï¼Œç”¨äºå¤„ç†å®æ—¶æ•°æ®æµã€‚å®ƒä»¥ **é«˜ååã€ä½å»¶è¿Ÿã€å¯æ°´å¹³æ‰©å±•** è‘—ç§°ï¼Œå¹¿æ³›åº”ç”¨äº **æ—¥å¿—æ”¶é›†ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶åˆ†æã€äº‹ä»¶é©±åŠ¨æ¶æ„** ç­‰åœºæ™¯ã€‚

------

## **1. Kafka æ ¸å¿ƒæ¦‚å¿µ**

### **1.1 åŸºæœ¬è§’è‰²**

| **è§’è‰²**           | **ä½œç”¨**                                                     |
| ------------------ | ------------------------------------------------------------ |
| **Producer**       | ç”Ÿäº§è€…ï¼Œå‘ Kafka å‘é€æ¶ˆæ¯ï¼ˆå¦‚æ—¥å¿—ã€è®¢å•æ•°æ®ï¼‰ã€‚              |
| **Consumer**       | æ¶ˆè´¹è€…ï¼Œä» Kafka è¯»å–å¹¶å¤„ç†æ¶ˆæ¯ã€‚                            |
| **Broker**         | Kafka æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå­˜å‚¨æ¶ˆæ¯å¹¶å¤„ç†è¯»å†™è¯·æ±‚ã€‚                   |
| **Topic**          | æ¶ˆæ¯çš„åˆ†ç±»ï¼ˆç±»ä¼¼æ•°æ®åº“çš„è¡¨ï¼‰ï¼Œå¦‚ `orders`ã€`logs`ã€‚          |
| **Partition**      | Topic çš„åˆ†åŒºï¼Œæ¯ä¸ª Partition æ˜¯ä¸€ä¸ªæœ‰åºã€ä¸å¯å˜çš„æ—¥å¿—åºåˆ—ã€‚  |
| **Offset**         | æ¶ˆæ¯åœ¨ Partition ä¸­çš„å”¯ä¸€ IDï¼ˆç±»ä¼¼æ•°ç»„ä¸‹æ ‡ï¼‰ã€‚               |
| **Consumer Group** | ä¸€ç»„ Consumer å…±åŒæ¶ˆè´¹ä¸€ä¸ª Topicï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚             |
| **ZooKeeper**      | ç®¡ç† Kafka é›†ç¾¤å…ƒæ•°æ®ï¼ˆBrokerã€Topicã€Partition ä¿¡æ¯ï¼‰ï¼ŒKafka 3.0+ å·²é€æ­¥ç§»é™¤ä¾èµ–ã€‚ |

------

## **2. Kafka æ¶æ„ä¸æ•°æ®æµ**

### **2.1 æ•°æ®å­˜å‚¨æ–¹å¼**

- **Topic åˆ†æˆå¤šä¸ª Partition**ï¼Œæ¯ä¸ª Partition å­˜å‚¨åœ¨ä¸åŒçš„ Broker ä¸Šã€‚
- **æ¶ˆæ¯å†™å…¥ Partition åä¸å¯ä¿®æ”¹**ï¼Œåªèƒ½è¿½åŠ ï¼ˆAppend-Onlyï¼‰ã€‚
- **æ¶ˆæ¯æŒ‰ Offset é¡ºåºå­˜å‚¨**ï¼ŒConsumer é€šè¿‡ Offset å®šä½æ¶ˆæ¯ã€‚

markdown

å¤åˆ¶

```markdown
Producer â†’ Topic (Partition 0, Partition 1, ...) â†’ Consumer Group
```

### **2.2 åˆ†åŒºï¼ˆPartitionï¼‰çš„ä½œç”¨**

- **æé«˜å¹¶å‘**ï¼šå¤šä¸ª Consumer å¯ä»¥åŒæ—¶è¯»å–ä¸åŒ Partitionã€‚
- **æ•°æ®åˆ†ç‰‡**ï¼šå•ä¸ª Topic çš„æ•°æ®å¯ä»¥åˆ†å¸ƒåœ¨å¤šä¸ªæœºå™¨ä¸Šã€‚
- **ä¿è¯é¡ºåºæ€§**ï¼šå•ä¸ª Partition å†…æ¶ˆæ¯æœ‰åºï¼ˆä½†å…¨å±€æ— åºï¼‰ã€‚

------

## **3. Kafka æ ¸å¿ƒç‰¹æ€§**

### **3.1 é«˜ååä¸ä½å»¶è¿Ÿ**

- **é¡ºåºç£ç›˜ I/O**ï¼šKafka é€šè¿‡é¡ºåºå†™å…¥ç£ç›˜ï¼ˆæ¯”éšæœºå†™å…¥å¿« 100 å€ï¼‰ã€‚
- **é›¶æ‹·è´ï¼ˆZero-Copyï¼‰**ï¼šå‡å°‘æ•°æ®åœ¨å†…å­˜ä¸­çš„æ‹·è´æ¬¡æ•°ã€‚
- **æ‰¹é‡å‘é€ï¼ˆBatchingï¼‰**ï¼šProducer æ‰¹é‡å‘é€æ¶ˆæ¯ï¼Œå‡å°‘ç½‘ç»œå¼€é”€ã€‚

### **3.2 æ¶ˆæ¯æŒä¹…åŒ–**

- **æ¶ˆæ¯é»˜è®¤æŒä¹…åŒ–åˆ°ç£ç›˜**ï¼ˆå¯é…ç½®ä¿ç•™æ—¶é—´ï¼Œå¦‚ 7 å¤©ï¼‰ã€‚
- **æ”¯æŒæ•°æ®å‹ç¼©**ï¼ˆSnappyã€GZIPã€LZ4ï¼‰ã€‚

### **3.3 æ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰**

- **è´Ÿè½½å‡è¡¡**ï¼šä¸€ä¸ª Partition åªèƒ½è¢«ä¸€ä¸ª Consumer Group ä¸­çš„ä¸€ä¸ª Consumer æ¶ˆè´¹ã€‚
- **æ°´å¹³æ‰©å±•**ï¼šå¢åŠ  Consumer å¯æé«˜æ¶ˆè´¹é€Ÿåº¦ã€‚

**ç¤ºä¾‹**ï¼š

- å‡è®¾ Topic 

  ```
  orders
  ```

   æœ‰ 3 ä¸ª Partitionï¼ŒConsumer Group 

  ```
  payment-group
  ```

   æœ‰ 2 ä¸ª Consumerï¼š

  - Consumer 1 è¯»å– Partition 0 å’Œ 1ã€‚
  - Consumer 2 è¯»å– Partition 2ã€‚

------

## **4. Kafka ä½¿ç”¨åœºæ™¯**

### **4.1 æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰**

- **è§£è€¦ç³»ç»Ÿ**ï¼šè®¢å•æœåŠ¡ â†’ Kafka â†’ åº“å­˜æœåŠ¡ã€‚
- **æµé‡å‰Šå³°**ï¼šçªå‘æµé‡å…ˆè¿›å…¥ Kafkaï¼Œæ¶ˆè´¹è€…æŒ‰èƒ½åŠ›å¤„ç†ã€‚

### **4.2 æ—¥å¿—æ”¶é›†ä¸ç›‘æ§**

- **é›†ä¸­å¼æ—¥å¿—**ï¼šæ‰€æœ‰æœåŠ¡çš„æ—¥å¿—å‘é€åˆ° Kafkaï¼Œå†ç”± ELKï¼ˆElasticsearch + Logstash + Kibanaï¼‰å¤„ç†ã€‚
- **å®æ—¶ç›‘æ§**ï¼šç»“åˆ Flink/Spark Streaming åšå®æ—¶åˆ†æã€‚

### **4.3 äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰**

- **ç”¨æˆ·è¡Œä¸ºè¿½è¸ª**ï¼šå¦‚ç‚¹å‡»ã€æœç´¢äº‹ä»¶å®æ—¶å†™å…¥ Kafkaã€‚
- **å¾®æœåŠ¡é€šä¿¡**ï¼šæœåŠ¡é—´é€šè¿‡ Kafka ä¼ é€’äº‹ä»¶ï¼ˆå¦‚ `order.created`ï¼‰ã€‚

------

## **5. Kafka é›†ç¾¤ä¸é«˜å¯ç”¨**

### **5.1 å‰¯æœ¬æœºåˆ¶ï¼ˆReplicationï¼‰**

- **æ¯ä¸ª Partition æœ‰å¤šä¸ªå‰¯æœ¬**ï¼ˆå¦‚ 3 å‰¯æœ¬ï¼š1 Leader + 2 Followerï¼‰ã€‚
- **Leader å¤„ç†è¯»å†™è¯·æ±‚**ï¼ŒFollower åŒæ­¥æ•°æ®ã€‚
- **ISRï¼ˆIn-Sync Replicasï¼‰**ï¼šä¸ Leader æ•°æ®åŒæ­¥çš„å‰¯æœ¬é›†åˆã€‚

### **5.2 æ•…éšœæ¢å¤**

- **Leader å®•æœº**ï¼šControllerï¼ˆé€šè¿‡ ZooKeeper é€‰ä¸¾ï¼‰ä» ISR ä¸­é€‰æ–° Leaderã€‚
- **æ•°æ®ä¸ä¸¢å¤±**ï¼šè‡³å°‘ä¸€ä¸ª ISR å­˜æ´»å³å¯ä¿è¯æ•°æ®å®‰å…¨ã€‚

### **5.3 é›†ç¾¤éƒ¨ç½²å»ºè®®**

- **è‡³å°‘ 3 ä¸ª Broker**ï¼šé¿å…è„‘è£‚é—®é¢˜ã€‚

- **å‰¯æœ¬æ•° â‰¥ 2**ï¼šé€šå¸¸è®¾ç½®ä¸º 3ã€‚

- åˆ†åŒºæ•°è§„åˆ’ï¼š

  - å•ä¸ª Partition çš„ååçº¦ 10MB/sã€‚
- åˆ†åŒºæ•° = max(Consumer æ•°é‡, æœŸæœ›åå / 10MB/s)ã€‚

------

## **6. Kafka å¸¸è§é—®é¢˜**

### **6.1 æ¶ˆæ¯ä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ**

- Producerï¼š

  - è®¾ç½® `acks=all`ï¼ˆç­‰å¾…æ‰€æœ‰ ISR ç¡®è®¤ï¼‰ã€‚
  - å¯ç”¨é‡è¯•ï¼ˆ`retries=3`ï¼‰ã€‚
  
- Brokerï¼š

  - ç¡®ä¿ `min.insync.replicas=2`ï¼ˆè‡³å°‘ 2 ä¸ª ISRï¼‰ã€‚

- Consumerï¼š

  - å…³é—­è‡ªåŠ¨æäº¤ Offsetï¼ˆ`enable.auto.commit=false`ï¼‰ã€‚
- å¤„ç†å®Œæ¶ˆæ¯å†æ‰‹åŠ¨æäº¤ Offsetã€‚

### **6.2 æ¶ˆæ¯é‡å¤æ¶ˆè´¹æ€ä¹ˆåŠï¼Ÿ**

- å¹‚ç­‰æ€§ Producer

  ```
  enable.idempotence=true
  ```

  - é¿å…ç½‘ç»œé‡è¯•å¯¼è‡´é‡å¤æ¶ˆæ¯ã€‚
  
- Consumer å»é‡ï¼š

  - ä¸šåŠ¡å±‚ç»´æŠ¤å·²å¤„ç†æ¶ˆæ¯çš„ IDï¼ˆå¦‚ Redis è®°å½• Offsetï¼‰ã€‚

### **6.3 å¦‚ä½•ä¿è¯æ¶ˆæ¯é¡ºåºï¼Ÿ**

- å•ä¸ª Partition å†…æœ‰åºï¼š

  - åŒä¸€è®¢å•çš„æ¶ˆæ¯å‘é€åˆ°åŒä¸€ Partitionï¼ˆé€šè¿‡ Key å“ˆå¸Œï¼‰ã€‚

- å…¨å±€æ— åºï¼š

  - éœ€ä¸šåŠ¡å±‚å¤„ç†ï¼ˆå¦‚æ•°æ®åº“äº‹åŠ¡ + ç‰ˆæœ¬å·ï¼‰ã€‚

------

## **7. Kafka vs RabbitMQ vs RocketMQ**

| **ç‰¹æ€§**     | **Kafka**          | **RabbitMQ**       | **RocketMQ**       |
| ------------ | ------------------ | ------------------ | ------------------ |
| **è®¾è®¡ç›®æ ‡** | é«˜ååæµå¤„ç†       | é€šç”¨æ¶ˆæ¯é˜Ÿåˆ—       | åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯     |
| **ååé‡**   | ç™¾ä¸‡çº§ QPS         | ä¸‡çº§ QPS           | åä¸‡çº§ QPS         |
| **æ¶ˆæ¯é¡ºåº** | åˆ†åŒºå†…æœ‰åº         | é˜Ÿåˆ—æœ‰åº           | é˜Ÿåˆ—ï¼ˆåˆ†åŒºï¼‰å†…æœ‰åº |
| **å»¶è¿Ÿ**     | æ¯«ç§’çº§ï¼ˆæ‰¹é‡å‘é€ï¼‰ | å¾®ç§’çº§             | æ¯«ç§’çº§             |
| **é€‚ç”¨åœºæ™¯** | æ—¥å¿—ã€å®æ—¶æµå¤„ç†   | ä¸šåŠ¡è§£è€¦ã€å¼‚æ­¥ä»»åŠ¡ | ç”µå•†äº¤æ˜“ã€é‡‘èåœºæ™¯ |

------

## **8. Kafka å®æˆ˜ä»£ç ç¤ºä¾‹**

### **8.1 Producerï¼ˆJavaï¼‰**

java

å¤åˆ¶

```java
Properties props = new Properties();
props.put("bootstrap.servers", "localhost:9092");
props.put("acks", "all");
props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
props.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");

Producer<String, String> producer = new KafkaProducer<>(props);
producer.send(new ProducerRecord<>("orders", "order-123", "è®¢å•å†…å®¹"));
producer.close();
```

### **8.2 Consumerï¼ˆJavaï¼‰**

java

å¤åˆ¶

```java
Properties props = new Properties();
props.put("bootstrap.servers", "localhost:9092");
props.put("group.id", "order-group");
props.put("enable.auto.commit", "false");
props.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");
props.put("value.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");

KafkaConsumer<String, String> consumer = new KafkaConsumer<>(props);
consumer.subscribe(Arrays.asList("orders"));

while (true) {
    ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(100));
    for (ConsumerRecord<String, String> record : records) {
        System.out.printf("æ”¶åˆ°æ¶ˆæ¯: offset=%d, key=%s, value=%s\n", 
            record.offset(), record.key(), record.value());
        consumer.commitSync(); // æ‰‹åŠ¨æäº¤ Offset
    }
}
```

------

## **9. æ€»ç»“**

- **Kafka æ ¸å¿ƒ**ï¼šTopic + Partition + Offset + Consumer Groupã€‚
- **é«˜å¯ç”¨**ï¼šå‰¯æœ¬æœºåˆ¶ + ISR + Controller é€‰ä¸¾ã€‚
- **é«˜æ€§èƒ½**ï¼šé¡ºåº I/O + é›¶æ‹·è´ + æ‰¹é‡å‘é€ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šæ—¥å¿—æ”¶é›†ã€å®æ—¶æµå¤„ç†ã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€‚

æŒæ¡è¿™äº›çŸ¥è¯†åï¼Œä½ å¯ä»¥è½»æ¾æ­å»º Kafka é›†ç¾¤å¹¶åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼ ğŸš€

![image-20250509165119725](C:\Users\13565650660\AppData\Roaming\Typora\typora-user-images\image-20250509165119725.png)

### **Kafka å›¾è§£ä¸æ ¸å¿ƒæ¦‚å¿µè§£æ**

#### **1. Kafka æ¶æ„å›¾è§£**

Kafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµå¤„ç†å¹³å°ï¼Œæ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ **Producerï¼ˆç”Ÿäº§è€…ï¼‰**ã€**Brokerï¼ˆä»£ç†æœåŠ¡å™¨ï¼‰**ã€**Topicï¼ˆä¸»é¢˜ï¼‰**ã€**Partitionï¼ˆåˆ†åŒºï¼‰** å’Œ **Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰**ã€‚ä»¥ä¸‹æ˜¯ç®€åŒ–æ¶æ„å›¾ï¼š

markdown

å¤åˆ¶

```markdown
+-------------------+       +-------------------+
|   Producer (P1)   | ----> |   Broker (B1)     |
+-------------------+       |   - Topic A       |
                           |     - Partition 0  |
                           |     - Partition 1  |
                           +-------------------+
                                    â†‘
+-------------------+               |
|   Consumer (C1)   | <------------+
+-------------------+
```

- **Producer**ï¼šå‘é€æ¶ˆæ¯åˆ° Kafka é›†ç¾¤ã€‚
- **Broker**ï¼šå­˜å‚¨æ¶ˆæ¯çš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œç»„æˆ Kafka é›†ç¾¤ã€‚
- **Topic**ï¼šé€»è¾‘åˆ†ç±»ï¼Œå¦‚ `orders`ã€`logs`ã€‚
- **Partition**ï¼šTopic çš„åˆ†åŒºï¼Œå®ç°å¹¶è¡Œå¤„ç†å’Œè´Ÿè½½å‡è¡¡ã€‚
- **Consumer**ï¼šä» Topic æ‹‰å–æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚

æ›´è¯¦ç»†çš„äº¤äº’æµç¨‹å¯å‚è€ƒæ—¶åºå›¾ï¼š

1. Producer å‘é€æ¶ˆæ¯åˆ° Broker çš„æŒ‡å®š Topicã€‚
2. Broker å°†æ¶ˆæ¯å­˜å‚¨åˆ°å¯¹åº” Partitionï¼ˆæŒä¹…åŒ–åˆ°ç£ç›˜ï¼‰ã€‚
3. Consumer ä» Partition æ‹‰å–æ¶ˆæ¯ã€‚

------

#### **2. Broker çš„å«ä¹‰**

**Broker æ˜¯ Kafka é›†ç¾¤ä¸­çš„æœåŠ¡å™¨èŠ‚ç‚¹**ï¼Œæ ¸å¿ƒèŒè´£åŒ…æ‹¬ï¼š

- **å­˜å‚¨æ¶ˆæ¯**ï¼šç®¡ç†åˆ†é…ç»™å®ƒçš„ Partition æ•°æ®ï¼ˆæ¯ä¸ª Partition æ˜¯ä¸€ä¸ªæœ‰åºæ—¥å¿—æ–‡ä»¶ï¼‰ã€‚
- **å¤„ç†è¯·æ±‚**ï¼šæ¥æ”¶ Producer çš„æ¶ˆæ¯å†™å…¥ï¼Œå“åº” Consumer çš„æ‹‰å–è¯·æ±‚ã€‚
- **å‰¯æœ¬ç®¡ç†**ï¼šæ¯ä¸ª Partition æœ‰å¤šä¸ªå‰¯æœ¬ï¼ˆLeader + Followersï¼‰ï¼ŒBroker è´Ÿè´£åŒæ­¥æ•°æ®ã€‚
- **é›†ç¾¤åè°ƒ**ï¼šé€šè¿‡ ZooKeeper æˆ– Raft åè®®é€‰ä¸¾ Leaderï¼Œå®ç°é«˜å¯ç”¨ã€‚

**Broker çš„å…³é”®ç‰¹ç‚¹**ï¼š

- ä¸€ä¸ª Kafka é›†ç¾¤ç”±å¤šä¸ª Broker ç»„æˆï¼ˆé€šå¸¸è‡³å°‘ 3 ä¸ªï¼‰ã€‚
- æ¯ä¸ª Broker æœ‰å”¯ä¸€ IDï¼ˆ`broker.id`ï¼‰ï¼Œé€šè¿‡é…ç½® `listeners` å®šä¹‰é€šä¿¡åœ°å€ã€‚

------

#### **3. Partition çš„ä½œç”¨åŠä¸ Broker çš„å…³ç³»**

**Partition æ˜¯ Topic çš„ç‰©ç†åˆ†ç‰‡**ï¼Œæ ¸å¿ƒä½œç”¨åŒ…æ‹¬ï¼š

- **æé«˜ååé‡**ï¼šå¤šä¸ª Partition å…è®¸å¹¶è¡Œè¯»å†™ï¼ˆProducer/Consumer å¯åŒæ—¶æ“ä½œä¸åŒ Partitionï¼‰ã€‚
- **ä¿è¯é¡ºåºæ€§**ï¼šåŒä¸€ Partition å†…çš„æ¶ˆæ¯æœ‰åºï¼Œä½†è·¨ Partition æ— åºã€‚
- **æ°´å¹³æ‰©å±•**ï¼šPartition å¯åˆ†å¸ƒåˆ°ä¸åŒ Brokerï¼Œçªç ´å•æœºå­˜å‚¨é™åˆ¶ã€‚

**Partition ä¸ Broker çš„å…³ç³»**ï¼š

1. **åˆ†å¸ƒå­˜å‚¨**ï¼š
   - ä¸€ä¸ª Topic çš„ Partition ä¼šåˆ†æ•£åˆ°å¤šä¸ª Broker ä¸Šï¼ˆå¦‚ Topic æœ‰ 3 ä¸ª Partitionï¼Œé›†ç¾¤æœ‰ 2 ä¸ª Brokerï¼Œåˆ™åˆ†é…å¯èƒ½æ˜¯ `Broker1: P0, P1`ï¼›`Broker2: P2`ï¼‰ã€‚
   - æ¯ä¸ª Partition çš„å‰¯æœ¬ï¼ˆReplicaï¼‰ä¹Ÿä¼šåˆ†å¸ƒåœ¨ä¸åŒ Broker ä¸Šã€‚
2. **Leader-Follower æœºåˆ¶**ï¼š
   - æ¯ä¸ª Partition æœ‰ä¸€ä¸ª Leaderï¼ˆå¤„ç†è¯»å†™è¯·æ±‚ï¼‰å’Œå¤šä¸ª Followersï¼ˆåŒæ­¥æ•°æ®ï¼‰ã€‚
   - Leader å’Œ Followers å¿…é¡»ä½äºä¸åŒ Brokerï¼Œç¡®ä¿é«˜å¯ç”¨ã€‚
3. **è´Ÿè½½å‡è¡¡**ï¼š
   - Kafka ä¼šå°½é‡å‡è¡¡ Partition åœ¨ Broker é—´çš„åˆ†å¸ƒï¼Œé¿å…çƒ­ç‚¹é—®é¢˜ã€‚

------

#### **4. æ€»ç»“**

- **Broker**ï¼šKafka é›†ç¾¤çš„ç‰©ç†èŠ‚ç‚¹ï¼Œè´Ÿè´£å­˜å‚¨æ¶ˆæ¯ã€å¤„ç†è¯·æ±‚å’Œå‰¯æœ¬åŒæ­¥ã€‚

- **Partition**ï¼šTopic çš„åˆ†åŒºï¼Œå®ç°å¹¶è¡Œå¤„ç†å’Œæ‰©å±•æ€§ï¼Œé€šè¿‡åˆ†å¸ƒåˆ°å¤šä¸ª Broker æå‡æ€§èƒ½ã€‚

- å…³ç³»:

  - Topic â†’ é€»è¾‘åˆ†ç±» â†’ åˆ†ä¸ºå¤šä¸ª Partition â†’ åˆ†å¸ƒåˆ°ä¸åŒ Brokerã€‚
- æ¯ä¸ª Partition çš„å‰¯æœ¬è·¨ Broker å­˜å‚¨ï¼Œç”± Leader å¤„ç†è¯»å†™ã€‚

**è®¾è®¡å»ºè®®**ï¼š

- **åˆ†åŒºæ•°**ï¼šæ ¹æ®ååéœ€æ±‚è®¾ç½®ï¼ˆè¿‡å¤šä¼šå¯¼è‡´å…ƒæ•°æ®è†¨èƒ€ï¼‰ã€‚
- **å‰¯æœ¬æ•°**ï¼šé€šå¸¸ä¸º 3ï¼Œç¡®ä¿æ•°æ®å¯é æ€§ã€‚

å‚è€ƒæ¶æ„å›¾ä¸ä»£ç ç¤ºä¾‹å¯æŸ¥çœ‹ã€‚